<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jekyll Polymer Theme" />

    <title>Shiny Matlab Figures: Drawing Error with Patches</title>
    <meta name="description" content="I make a lot of Matlab figures. That’s an occupational hazard of being the undergraduate in a research lab, I suppose. Over the past few years, though, the g...">

    <link rel="canonical" href="http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html">
    <link rel="alternate" type="application/rss+xml" title="Jekyll Polymer Theme" href='http://blog.juliaebert.com/feed.xml' />
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- Chrome for Android theme color -->
    <!-- TODO: Change to match final color scheme -->
    <meta name="theme-color" content="#303F9F">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Tile color for Win8 -->
    <meta name="msapplication-TileColor" content="#303F9F">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Jekyll Polymer Theme">
    <link rel="icon" sizes="192x192" href="/images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Jekyll Polymer Theme">
    <link rel="apple-touch-icon" href="/images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144) -->
    <meta name="msapplication-TileImage" content="/images/touch/ms-touch-icon-144x144-precomposed.png">

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="/styles/main.css">
    <!-- endbuild-->

    <!-- build:css styles/code-highlight.css -->
    <link rel="stylesheet" href="/styles/code-highlight.css">
    <!-- endbuild-->

    <link rel="stylesheet" href="/scripts/lightbox/css/lightbox.css">

    <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <!-- endbuild -->

    <!-- will be replaced with elements/elements.vulcanized.html -->
    <link rel="import" href="/elements/elements.html">
    <!-- endreplace-->
</head>

<body unresolved class="fullbleed layout vertical">
<span id="browser-sync-binding"></span>
<template is="dom-bind" id="app">

  <paper-drawer-panel id="paperDrawerPanel">
    <div drawer>

      <div class="wrapper">

        <!-- Drawer Toolbar -->
        <nav-image src="/images/material-bg-10.png" id="menu-img"></nav-image>

        <!-- Drawer Content -->
        <paper-menu class="list" attr-for-selected="data-route" selected="" on-iron-select="onMenuSelect">
          <a href="/"><iron-icon icon="home"></iron-icon><span>Home</span></a>
          <a href="/about"><iron-icon icon="social:person"></iron-icon><span>About</span></a>
          <a href="/archive"><iron-icon icon="history"></iron-icon><span>Archive</span></a>
          <a data-route="contact" href="/feed.xml"><iron-icon icon="fa:rss"></iron-icon><span>RSS Feed</span></a>
        </paper-menu>

        <my-nav-subheader>Elsewhere</my-nav-subheader>

        <paper-menu class="list" on-iron-select="onMenuSelect">
          
            <a href="http://juliaebert.com"><iron-icon icon="av:web"></iron-icon><span>My Website</span></a>
          
          
            <a href="https://github.com/jtebert"><iron-icon icon="fa:github"></iron-icon><span>My Github</span></a>
          
          <!--<a data-route="contact" href="/contact/"><iron-icon icon="mail"></iron-icon><span>Contact</span></a>-->
        </paper-menu>

        <div class="push"></div>
      </div>

      <div id="copyright-info">&copy; 2016, Julia Ebert</div>

    </div>

    <paper-header-panel main mode="standard">

      <!-- Main Toolbar -->
      <paper-toolbar id="mainToolbar">
        <!-- Menu toggle -->
        <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>
        <span class="title">Jekyll Polymer Theme</span>
        <!-- Search bar -->
        <my-search-bar class="top" id="search-input" searchjson="/search.json"></my-search-bar>
        <!-- Application name -->
        <!--<div class="middle paper-font-display2 app-name">Jekyll Polymer Theme</div>-->
      </paper-toolbar>

    <!-- Main Content -->
    <style>
  body {
    background-color: #f9f9f9 !important;
  }
</style>

<div id="post">

  

  <h1 class="paper-font-display1">Shiny Matlab Figures: Drawing Error with Patches</h1>
  <h4 class="paper-font-subhead" id="date">Dec 15, 2014</h4>

  <div id="post-content">
    <p>I make a lot of Matlab figures. That’s an occupational hazard of being the undergraduate in a research lab, I suppose. Over the past few years, though, the graphically-conscious side of me has gotten annoyed at the terrible Matlab figures I’ve seen on posters and even in papers. I have also come up with my own tricks to create really gorgeous Matlab figures. Over the next few posts, I’ll share a couple of them with you, including:</p>

<ul>
  <li>Plotting error with patches instead of error bars</li>
  <li>Changing default figure drawing parameters and sizing</li>
  <li>Exporting figures</li>
</ul>

<!--more-->

<p>Let’s start with the first one: error bars. Error bars are great when you have a few data points, but when you have more continuous data, it gets messy and hard to tell what’s going on, like this:</p>

<p><img src="https://lh4.googleusercontent.com/-QhUOrl2lVn4/VI8TzYRXb3I/AAAAAAAACDs/qncwSUVQIng/s0/errorbars.png" alt="error bars" /></p>

<p>This is created using a pretty simple script in Matlab. The data is generated pseudo-randomly:</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% Generate pseudo-random data</span>
<span class="n">num_data_points</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">num_data_points</span><span class="p">);</span>
<span class="k">for</span> <span class="nb">i</span><span class="o">=</span><span class="mi">1</span><span class="p">:</span><span class="nb">size</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">data</span><span class="p">(:,</span><span class="nb">i</span><span class="p">)</span> <span class="o">=</span> <span class="n">data</span><span class="p">(:,</span><span class="nb">i</span><span class="p">)</span><span class="o">*</span><span class="nb">i</span><span class="o">^.</span><span class="mi">5</span><span class="p">;</span>
<span class="k">end</span>

<span class="c1">% x values</span>
<span class="n">x_max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>

<span class="c1">% Calculate mean and standard deviation of data</span>
<span class="n">data_mean</span> <span class="o">=</span> <span class="nb">mean</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">data_std</span> <span class="o">=</span> <span class="nb">std</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span></code></pre></figure>

<p>Then it’s plotted with a few lines of code using the errorbar function:</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% Plotting error with errorbar</span>
<span class="nb">figure</span>
<span class="nb">errorbar</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">data_mean</span><span class="p">,</span> <span class="n">data_std</span><span class="p">,</span> <span class="s1">'LineWidth'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">title</span><span class="p">(</span><span class="s1">'Plot error with errorbar'</span><span class="p">)</span>
<span class="nb">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">x_max</span><span class="p">])</span></code></pre></figure>

<p>However, I’ve discovered that using the patch function in Matlab can create much more visually appealing and easier to interpret graphs like this:</p>

<p><img src="https://lh5.googleusercontent.com/-hCz5iD0iYGs/VI8WGnGXyXI/AAAAAAAACD8/E61dFOtEp0Y/s0/patch.png" alt="error patch" /></p>

<p>This requires some additional code:</p>

<figure class="highlight"><pre><code class="language-matlab" data-lang="matlab"><span class="c1">% Plotting error with patches</span>
<span class="nb">figure</span>
<span class="nb">hold</span> <span class="n">on</span>
<span class="nb">title</span><span class="p">(</span><span class="s1">'Plot error with patch'</span><span class="p">)</span>
<span class="nb">xlim</span><span class="p">([</span><span class="mi">0</span> <span class="n">x_max</span><span class="p">])</span>
<span class="c1">% Loop the x values back to the start</span>
<span class="n">patch_x_vals</span> <span class="o">=</span> <span class="p">[</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">x_vals</span><span class="p">(</span><span class="k">end</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">)];</span>
<span class="c1">% Create the data+std and data-std values</span>
<span class="n">patch_data_std</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_mean</span><span class="o">-</span><span class="n">data_std</span><span class="p">,</span> <span class="n">data_mean</span><span class="p">(</span><span class="k">end</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">data_std</span><span class="p">(</span><span class="k">end</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">)];</span> 
<span class="nb">plot</span><span class="p">(</span><span class="n">x_vals</span><span class="p">,</span> <span class="n">data_mean</span><span class="p">,</span> <span class="s1">'LineWidth'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">patch</span><span class="p">(</span><span class="n">patch_x_vals</span><span class="p">,</span> <span class="n">patch_data_std</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">'EdgeColor'</span><span class="p">,</span> <span class="s1">'None'</span><span class="p">,</span> <span class="s1">'FaceAlpha'</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">);</span></code></pre></figure>

<p>The patch is drawn as a polygon, starting on the left with the lower bound, then reversing direction to draw the upper bound of the error from right to left. The arguments to patch after this specify the face color, edge color, and transparency.</p>

<p>This relatively minimal addition can make your plots much easier to read, particularly if you’re dealing with multiple data sets at the same time where error bars would overlap and be nearly impossible to distinguish.</p>

  </div>

  <hr/>

  <div class="share section">
    <a href="https://facebook.com/sharer.php?u=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html" rel="nofollow" target="_blank" title="Share on Facebook">
      <paper-icon-button icon="fa:facebook"></paper-icon-button></a>
    <a href="https://plus.google.com/share?url=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html" rel="nofollow" target="_blank" title="Share on Google+">
      <paper-icon-button icon="fa:google-plus"></paper-icon-button></a>
    <a href="http://www.linkedin.com/shareArticle?mini=true&url=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html&title=Shiny Matlab Figures: Drawing Error with Patches&summary=&source=http://blog.juliaebert.com" rel="nofollow" target="_blank" title="Share on LinkedIn">
      <paper-icon-button icon="fa:linkedin"></paper-icon-button></a>
    <a href="http://www.reddit.com/submit?url=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html&title=Shiny Matlab Figures: Drawing Error with Patches" rel="nofollow" target="_blank" title="Share on Reddit">
      <paper-icon-button icon="fa:reddit"></paper-icon-button></a>
    <a href="http://www.tumblr.com/share/link?url=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html&name={[ page.title }}&description=" rel="nofollow" target="_blank" title="Share on Tumblr">
      <paper-icon-button icon="fa:tumblr"></paper-icon-button></a>
    <a href="https://twitter.com/intent/tweet?text=Shiny Matlab Figures: Drawing Error with Patches&url=http://blog.juliaebert.com/2014/12/15/shiny-matlab-figures-drawing-error-with-patches.html&via=&related=" rel="nofollow" target="_blank" title="Share on Twitter">
      <paper-icon-button icon="fa:twitter"></paper-icon-button></a>
  </div>

  <div class="section">
    
    <a href="/2014/10/30/an-awesomely-useful-thing-google-keep.html"><paper-button raised class="accent">
      <iron-icon icon="arrow-back"></iron-icon> Previous Post
    </paper-button></a>
    

    
      <a href="/2014/12/15/shiny-matlab-figures-sizing-and-parameters.html"><paper-button raised class="accent">
        Next Post <iron-icon icon="arrow-forward"></iron-icon>
      </paper-button></a>
    
  </div>

  
    <div class="section">
    <div id="disqus_thread"></div>
</div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'juliaebert';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  

</div>


    </paper-header-panel>
  </paper-drawer-panel>

</template>

<script src="/scripts/jekyll-search.min.js" type="text/javascript"></script>

<!-- MathJax -->
<script type="text/javascript"
        src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- build:js scripts/app.js -->
<script src="/scripts/app.js"></script>
<!-- endbuild-->


	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','/scripts/g-analyt.js','ga');
		
		ga('create', 'UA-54476418-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->



<script type="text/javascript" src="/scripts/lightbox/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="/scripts/lightbox/js/lightbox.js"></script>

</body>

</html>
